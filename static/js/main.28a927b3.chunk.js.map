{"version":3,"sources":["api/api.js","api/shopService.js","store/actions-conts/actions-conts.js","store/actions/actions.js","consts/conts.js","store/reducers/shopReducer.js","components/CustomHeaderBlock/CustomHeaderBlock.jsx","components/CustomSpinner/CustomSpinner.jsx","img/persik.png","panels/Home.js","panels/Map.js","components/CustomFooter/CustomFooter.jsx","components/CurrentShop/CurrentShop.jsx","img/svg/Selected/Selected.jsx","api/userService.js","store/reducers/userReducer.js","components/CurrentShopProduct/CurrentShopProduct.jsx","components/Popup/Popup.jsx","App.js","store/store.js","index.js"],"names":["$api","axios","create","baseURL","interceptors","request","use","config","headers","Authorization","ShopService","url","get","GET_ALL_SHOPS","CHECK_PANEL","CHECK_VIEW","SET_CURRENT_SHOP_MENU","SET_LOADING","SET_CURRENT_SHOP_LOADING","SET_USER_GEO_DATA","SET_USER_ORDER","setAllShopsAC","payload","type","setCurrentShopAC","setUserGeoDataAC","setUserOrderAC","setLoadingAC","setCurrentShopLoadingAC","BASE_URL","ALL_SHOPS_URL","CURRENT_SHOP_MENU_URL","CURRENT_SHOP_CATEGORIES_URL","VIEWS","PANELS","SEARCH_PANELS","MAIN_PANEL","CURRENT_SHOP_PANEL","CURRENT_SHOP_ORDER_PANEL","MAP_PANEL","TABS","initialState","shops","currentItemsCount","totalItemsCount","currentPage","isLoading","activePanels","activeView","currentShop","id","caption","img","name","menu","middleRate","addressText","activeCategory","categories","workingFrom","workingTo","setAllShops","pageNum","pageSize","console","log","dispatch","a","getAllShops","data","content","totalElements","page","setCurrentShop","categoryId","getCurrentShopCategories","catId","getCurrentShopMenu","shopId","shopsReducer","state","action","stateCopy","arr1","sort","b","Set","find","shop","CustomHeaderBlock","useDispatch","class","size","className","icon","onIconClick","e","inputValue","target","parentElement","closest","querySelector","value","split","getGeo","fetch","res","json","adress","city","address","amenity","road","houseNumber","house_number","dataEdited","Object","values","filter","prop","undefined","length","width","height","viewBox","fill","xmlns","d","CustomSpinner","style","display","alignItems","flexDirection","margin","Home","go","fetchedUser","userGeo","setModalActive","modalActive","useSelector","store","user","userAdress","scrollHandler","documentElement","scrollHeight","scrollTop","window","innerHeight","useEffect","document","addEventListener","removeEventListener","filteredShops","onClick","panel","map","persik","Map","props","useState","localMap","setLocalMap","ymaps","ready","center","zoom","searchControlProvider","forEach","i","template","templateLayoutFactory","createClass","GeoObject","myGeoObject","Placemark","location","hintContent","iconLayout","iconShape","coordinates","geoObjects","add","events","dom","getElementsByClassName","dataset","CustomFooter","activePanel","expandable","some","CurrentShop","currentUserOrder","image","src","subtitle","category","menuItem","mode","level","weight","cost","totalCount","stretched","marginTop","position","bottom","Selected","x","y","rx","stroke","UserService","then","userLocation","adds","sizeCount","addsCount","setUserGeoData","lat","long","geoData","setUserOrder","count","userReducer","join","CurrentShopProduct","activeTab","setActiveTab","selected","onChange","marginRight","Popup","styles","mapStyles","activeModal","onClose","right","param","renderSwitch","App","setActivePanel","setUser","popoup","setPopoup","setUserGeo","bridge","send","geo","subscribe","detail","schemeAttribute","createAttribute","scheme","body","attributes","setNamedItem","fetchData","currentTarget","to","modal","redusers","combineReducers","shopReducer","createStore","applyMiddleware","thunk","redux","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.28a927b3.chunk.js","sourcesContent":["import axios from \"axios\";\r\nexport const API_URL = \"https://nostresso-back.herokuapp.com\";\r\nconst $api = axios.create({\r\n  baseURL: API_URL,\r\n});\r\n\r\n$api.interceptors.request.use((config) => {\r\n  config.headers.Authorization = `Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIyMDQ4NTU4ODAiLCJpYXQiOjE2MzUwOTM3MzQsImV4cCI6MTY0MzczMzczNH0._nUSWKfG3vVsjW-iao4qy7Dsl2P_5XZ78GYsx3s6tyg`;\r\n  return config;\r\n});\r\n\r\nexport default $api;\r\n","import axios from \"axios\";\r\nimport $api from \"./api\";\r\nexport default class ShopService {\r\n  static getAllShops(url) {\r\n    return $api.get(url)\r\n  }\r\n  static getCurrentShopMenu(url) {\r\n    return $api.get(url);\r\n  }\r\n  static getCurrentShopCategories(url) {\r\n    return $api.get(url, {});\r\n  }\r\n}\r\n","// SHOP\r\nexport const GET_ALL_SHOPS = \"GET_ALL_SHOPS\";\r\nexport const CHECK_PANEL = \"CHECK_PANEL\";\r\nexport const CHECK_VIEW = \"CHECK_VIEW\";\r\nexport const SET_CURRENT_SHOP_MENU = \"SET_CURRENT_SHOP_MENU\";\r\nexport const SET_LOADING = \"SET_LOADING\";\r\nexport const SET_CURRENT_SHOP_LOADING = \"SET_CURRENT_SHOP_LOADING\";\r\n// USER\r\nexport const SET_USER_GEO_DATA = \"SET_USER_GEO_DATA\";\r\nexport const SET_USER_ORDER = \"SET_USER_ORDER\";\r\n","import {\r\n  CHECK_PANEL,\r\n  CHECK_VIEW,\r\n  GET_ALL_SHOPS,\r\n  SET_CURRENT_SHOP_LOADING,\r\n  SET_CURRENT_SHOP_MENU,\r\n  SET_LOADING,\r\n  SET_USER_GEO_DATA,\r\n  SET_USER_ORDER,\r\n} from \"../actions-conts/actions-conts\";\r\n\r\nexport const setAllShopsAC = (payload) => {\r\n  return {\r\n    type: GET_ALL_SHOPS,\r\n    payload,\r\n  };\r\n};\r\n\r\nexport const checkActivePanelAC = (payload) => {\r\n  return {\r\n    type: CHECK_PANEL,\r\n    payload,\r\n  };\r\n};\r\nexport const checkActiveViewAC = (payload) => {\r\n  return {\r\n    type: CHECK_VIEW,\r\n    payload,\r\n  };\r\n};\r\nexport const setCurrentShopAC = (payload) => {\r\n  return {\r\n    type: SET_CURRENT_SHOP_MENU,\r\n    payload,\r\n  };\r\n};\r\nexport const setUserGeoDataAC = (payload) => {\r\n  return {\r\n    type: SET_USER_GEO_DATA,\r\n    payload,\r\n  };\r\n};\r\nexport const setUserOrderAC = (payload) => {\r\n  return {\r\n    type: SET_USER_ORDER,\r\n    payload,\r\n  };\r\n};\r\nexport const setLoadingAC = (payload) => {\r\n  return {\r\n    type: SET_LOADING,\r\n    payload,\r\n  };\r\n};\r\nexport const setCurrentShopLoadingAC = (payload) => {\r\n  return {\r\n    type: SET_CURRENT_SHOP_LOADING,\r\n    payload,\r\n  };\r\n};\r\n","export const BASE_URL = \"https://nostresso-back.herokuapp.com/\";\r\nexport const ALL_SHOPS_URL = BASE_URL + \"shop/all\";\r\nexport const CURRENT_SHOP_MENU_URL = BASE_URL + \"shop/\";\r\nexport const CURRENT_SHOP_CATEGORIES_URL = \"categories\";\r\nexport const GEO_LOCATION_URL =\r\n  \"https://geocode-maps.yandex.ru/1.x/?apikey=58644385-f6c9-4932-8603-6756aa2d4314&geocode=\";\r\nexport const ITEMS_PER_PAGE = 2;\r\n\r\nexport const VIEWS = {\r\n  HOME_VIEW: \"home\",\r\n  CURRENT_SHOP_VIEW: \"current-cafe-view\",\r\n  MAP_VIEW: \"map\",\r\n};\r\nexport const PANELS = {\r\n  SEARCH_PANELS: [\"home\", \"map\", \"current-shop\", \"current-shop-order-product\"],\r\n  MAIN_PANEL: \"main\",\r\n  CURRENT_SHOP_PANEL: \"current-shop\",\r\n  CURRENT_SHOP_ORDER_PANEL: \"current-shop-order-product\",\r\n  MAP_PANEL: \"map-panel\",\r\n};\r\nexport const TABS = {\r\n  small: 140,\r\n  medium: 160,\r\n  large: 180,\r\n};\r\n","/* eslint-disable no-use-before-define */\r\n/* eslint-disable camelcase */\r\n/* eslint-disable arrow-body-style */\r\n/* eslint-disable consistent-return */\r\n/* eslint-disable array-callback-return */\r\n/* eslint-disable func-names */\r\n\r\nimport ShopService from \"../../api/shopService\";\r\nimport {\r\n  CHECK_PANEL,\r\n  CHECK_VIEW,\r\n  GET_ALL_SHOPS,\r\n  SET_CURRENT_SHOP_LOADING,\r\n  SET_CURRENT_SHOP_MENU,\r\n  SET_LOADING,\r\n} from \"../actions-conts/actions-conts\";\r\nimport {\r\n  setAllShopsAC,\r\n  setCurrentShopAC,\r\n  setCurrentShopLoadingAC,\r\n  setLoadingAC,\r\n} from \"../actions/actions\";\r\nimport {\r\n  VIEWS,\r\n  PANELS,\r\n  ALL_SHOPS_URL,\r\n  CURRENT_SHOP_CATEGORIES_URL,\r\n  CURRENT_SHOP_MENU_URL,\r\n  ITEMS_PER_PAGE,\r\n} from \"../../consts/conts\";\r\n\r\nconst initialState = {\r\n  shops: [],\r\n  currentItemsCount: ITEMS_PER_PAGE,\r\n  totalItemsCount: 0,\r\n  currentPage: 0,\r\n  isLoading: true,\r\n  activePanels: {\r\n    [VIEWS.HOME_VIEW]: PANELS.MAIN_PANEL,\r\n  },\r\n  activeView: VIEWS.HOME_VIEW,\r\n  currentShop: {\r\n    isLoading: true,\r\n    id: 0,\r\n    caption: \"\",\r\n    img: \"\",\r\n    name: \"\",\r\n    menu: [],\r\n    middleRate: null,\r\n    addressText: \"\",\r\n    activeCategory: null,\r\n    categories: [],\r\n    workingFrom: \"\",\r\n    workingTo: \"\",\r\n  },\r\n};\r\n\r\nconst shopsReducer = (state = initialState, action) => {\r\n  let stateCopy = { ...state };\r\n  switch (action.type) {\r\n    case GET_ALL_SHOPS:\r\n      console.log(action);\r\n      stateCopy.currentPage = action.payload.page;\r\n      const arr1 = action.payload.content.sort(\r\n        (a, b) => a.middleRate - b.middleRate\r\n      );\r\n      stateCopy.shops = [...new Set([...stateCopy.shops, ...arr1])];\r\n      stateCopy.totalItemsCount = action.payload.totalElements;\r\n      if (stateCopy.currentItemsCount <= stateCopy.totalItemsCount) {\r\n      }\r\n      return {\r\n        ...stateCopy,\r\n      };\r\n    case CHECK_PANEL:\r\n      stateCopy.activePanels = action.payload;\r\n      return {\r\n        ...stateCopy,\r\n      };\r\n    case CHECK_VIEW:\r\n      stateCopy.activeView = action.payload;\r\n      return {\r\n        ...stateCopy,\r\n      };\r\n    case SET_LOADING:\r\n      stateCopy.isLoading = action.payload;\r\n      return {\r\n        ...stateCopy,\r\n      };\r\n      case SET_CURRENT_SHOP_LOADING :\r\n        stateCopy.currentShop.isLoading = action.payload\r\n        return{\r\n          ...stateCopy\r\n        }\r\n    case SET_CURRENT_SHOP_MENU:\r\n      const id = +action.payload.shopId;\r\n      const currentShop = stateCopy.shops.find((shop) => id === shop.id);\r\n      stateCopy.currentShop = {\r\n        ...currentShop,\r\n        menu: action.payload.menu,\r\n        categories: action.payload.categories,\r\n      };\r\n\r\n      return {\r\n        ...stateCopy,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const setAllShops = (pageNum = 1, pageSize = 2) => {\r\n  console.log(\"PAGE SIZE\", pageSize);\r\n  return async function (dispatch) {\r\n    try {\r\n      const data = await ShopService.getAllShops(\r\n        `${ALL_SHOPS_URL}?pageNumber=${pageNum}&pageSize=${pageSize}&lat=0&lng=0`\r\n      );\r\n      dispatch(setLoadingAC(false));\r\n      dispatch(\r\n        setAllShopsAC({\r\n          content: data.data.content,\r\n          totalElements: data.data.totalElements,\r\n          page: pageNum,\r\n        })\r\n      );\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n};\r\nexport const setCurrentShop = (id, categoryId, pageNum = 1, pageSize = 5) => {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(setCurrentShopLoadingAC(true));\r\n      const categories = await ShopService.getCurrentShopCategories(\r\n        `${CURRENT_SHOP_MENU_URL}${id}/${CURRENT_SHOP_CATEGORIES_URL}`\r\n      );\r\n      const catId = categoryId || categories.data[0].id;\r\n      const menu = await ShopService.getCurrentShopMenu(\r\n        `${CURRENT_SHOP_MENU_URL}${id}/category/${catId}/menu?pageNumber=${pageNum}&pageSize=${pageSize}&lat=0&lng=0`\r\n      );\r\n      dispatch(setCurrentShopLoadingAC(false))\r\n      console.log(\"menu\", menu, \"cat\", categories);\r\n      dispatch(\r\n        setCurrentShopAC({\r\n          menu: menu.data.content,\r\n          categories: categories.data,\r\n          shopId: id,\r\n        })\r\n      );\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n};\r\nexport default shopsReducer;\r\n","import React from \"react\";\r\nimport \"./CustomHeaderBlock.css\";\r\nimport { Spacing, Title, Div, Search } from \"@vkontakte/vkui\";\r\nimport { Icon24Search } from \"@vkontakte/icons\";\r\nimport { compose } from \"redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setUserGeoDataAC } from \"../../store/actions/actions\";\r\nexport default function CustomHeaderBlock() {\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <div class='header__block'>\r\n      <Spacing size={16} />\r\n      <Title className='header__block-title'>Заказывай еду ко времени</Title>\r\n      <Spacing size={16} />\r\n      <Div className='header__block-options'>\r\n        <Search\r\n          className='header__block-search'\r\n          icon={<Icon24Search />}\r\n          onIconClick={(e) => {\r\n            const parentEl = e.target.parentElement\r\n              .closest(\".vkuiSearch__icons\")\r\n              .closest(\".Search__after\").parentElement;\r\n            const inputValue = parentEl\r\n              .querySelector(\".Search__input\")\r\n              .value.split(\" \");\r\n            console.log(inputValue);\r\n            const getGeo = async () => {\r\n              const res = await fetch(\r\n                `https://nominatim.openstreetmap.org/?addressdetails=1&q=${\r\n                  inputValue[0] ? inputValue[0] : \"\"\r\n                }+${inputValue[1] ? inputValue[1] : \"\"}+${\r\n                  inputValue[2] ? inputValue[2] : \"\"\r\n                }&format=json&limit=1`\r\n              );\r\n              const data = await res.json();\r\n              const adress = {\r\n                city: data[0].address?.city,\r\n                amenity: data[0].address?.amenity,\r\n                road: data[0].address?.road,\r\n                houseNumber: data[0].address?.house_number,\r\n              };\r\n              const dataEdited = Object.values(adress).filter((prop) => {\r\n                if (prop !== undefined || null) {\r\n                  if (prop.length) {\r\n                    return prop;\r\n                  }\r\n                }\r\n              });\r\n              dispatch(setUserGeoDataAC({ data: dataEdited, type: \"search\" }));\r\n            };\r\n            getGeo();\r\n          }}\r\n        />\r\n        <Div className='geo'>\r\n          <svg\r\n            width='20'\r\n            height='20'\r\n            viewBox='0 0 43 60'\r\n            fill='none'\r\n            xmlns='http://www.w3.org/2000/svg'>\r\n            <path\r\n              d='M21.0096 0C9.4186 0 0 9.4186 0 21.0096C0 24.92 1.07921 28.7463 3.13953 32.0541L19.8183 58.9363C20.1407 59.4549 20.7013 59.7632 21.304 59.7632H21.318C21.9347 59.7632 22.4953 59.4409 22.8037 58.9083L39.062 31.7738C40.9961 28.5361 42.0193 24.8079 42.0193 21.0096C42.0193 9.4186 32.6007 0 21.0096 0ZM36.0486 29.9797L21.2759 54.6475L6.11088 30.218C4.40095 27.4569 3.47591 24.2753 3.47591 21.0096C3.47591 11.3528 11.3528 3.47591 21.0096 3.47591C30.6665 3.47591 38.5294 11.3528 38.5294 21.0096C38.5294 24.1772 37.6604 27.2747 36.0486 29.9797Z'\r\n              fill='black'\r\n            />\r\n            <path\r\n              d='M21.0101 10.5119C15.2216 10.5119 10.4983 15.2212 10.4983 21.0097C10.4983 26.7701 15.1375 31.5215 21.0101 31.5215C26.9528 31.5215 31.5219 26.7141 31.5219 21.0097C31.5219 15.2212 26.7986 10.5119 21.0101 10.5119ZM21.0101 28.0316C17.1277 28.0316 13.9882 24.878 13.9882 21.0097C13.9882 17.1413 17.1558 13.9878 21.0101 13.9878C24.8644 13.9878 28.018 17.1553 28.018 21.0097C28.032 24.822 24.9485 28.0316 21.0101 28.0316Z'\r\n              fill='black'\r\n            />\r\n          </svg>\r\n        </Div>\r\n      </Div>\r\n      <Spacing size={16} />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Spinner } from \"@vkontakte/vkui\";\r\nexport default function CustomSpinner() {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"column\",\r\n      }}> \r\n      <Spinner size='medium' style={{ margin: \"20px 0\" }} />\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/persik.ae9f0072.png\";","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./Home.css\";\nimport {\n  Panel,\n  Group,\n  CardGrid,\n  ContentCard,\n  Div,\n  TabsItem,\n  Tabs,\n  Spinner,\n} from \"@vkontakte/vkui\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setCurrentShop } from \"../store/reducers/shopReducer\";\nimport CustomHeaderBlock from \"../components/CustomHeaderBlock/CustomHeaderBlock\";\nimport { setAllShops } from \"../store/reducers/shopReducer\";\nimport { ITEMS_PER_PAGE, PANELS } from \"../consts/conts\";\nimport CustomSpinner from \"../components/CustomSpinner/CustomSpinner\";\nimport persik from \"../img/persik.png\";\nconst Home = ({\n  id,\n  go,\n  fetchedUser,\n  shops,\n  userGeo,\n  modalActive,\n  setModalActive,\n}) => {\n  const { userAdress } = useSelector((store) => store.user);\n  const { currentItemsCount, totalItemsCount, currentPage, isLoading } =\n    useSelector((store) => store.shops);\n  const dispatch = useDispatch();\n  const page = currentPage + 1;\n  const scrollHandler = (e) => {\n    if (\n      e.target.documentElement.scrollHeight -\n        (e.target.documentElement.scrollTop + window.innerHeight) <\n        1 &&\n      currentPage * ITEMS_PER_PAGE <= totalItemsCount\n    ) {\n      dispatch(setAllShops(page, ITEMS_PER_PAGE));\n    }\n  };\n  useEffect(() => {\n    document.addEventListener(\"scroll\", scrollHandler);\n    return function () {\n      document.removeEventListener(\"scroll\", scrollHandler);\n    };\n  }, [currentItemsCount, currentPage]);\n\n  const filteredShops = shops;\n  return (\n    <Panel id={id}>\n      <CustomHeaderBlock />\n      <Group>\n        <Tabs className='select__tabs'>\n          <TabsItem>Cписок заведений4</TabsItem>\n          <TabsItem\n            data-to='map'\n            data-item='map-btn'\n            onClick={(e) => {\n              if (!userGeo) {\n                setModalActive({\n                  state: true,\n                  panel: PANELS.MAIN_PANEL,\n                  target: \"map-btn\",\n                  shop: false,\n                });\n                /*   const popup = document.querySelector(\".vkuiModalPage__in\");\n                console.log(popup); */\n                return;\n              }\n              go(e);\n            }}>\n            Карта заведений\n          </TabsItem>\n        </Tabs>\n        Adress : {userAdress}\n      </Group>\n      <Div>\n     {/*    <img src={persik} /> */}\n        <CardGrid className='cards__container' data-to='current-shop' size='l'>\n          {isLoading ? (\n            <Spinner />\n          ) : (\n            filteredShops.map((shop) => {\n              const id = shop.id;\n              return (\n                <ContentCard\n                  className='card'\n                  onClick={(e) => {\n                    dispatch(setCurrentShop(id));\n                    go(e.target.closest(\".cards__container\"));\n                  }}\n                  key={shop.id}\n                  className='item__card'\n                  image={persik}\n                  src={persik}\n                  img={persik}\n                  alt={shop.name}\n                  subtitle={\n                    \"Часы работы \" + shop.workingFrom + \" - \" + shop.workingTo\n                  }\n                  header={\"Рейтинг : \" + shop.middleRate}\n                  caption={\"Адрес : \" + shop.addressText}></ContentCard>\n              );\n            })\n          )}\n        </CardGrid>\n      </Div>\n    </Panel>\n  );\n};\n\nHome.propTypes = {\n  id: PropTypes.string.isRequired,\n  go: PropTypes.func.isRequired,\n  fetchedUser: PropTypes.shape({\n    photo_200: PropTypes.string,\n    first_name: PropTypes.string,\n    last_name: PropTypes.string,\n    city: PropTypes.shape({\n      title: PropTypes.string,\n    }),\n  }),\n};\n\nexport default Home;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport {\n  Panel,\n  PanelHeader,\n  PanelHeaderBack,\n  TabsItem,\n  Tabs,\n  Group,\n} from \"@vkontakte/vkui\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport \"./Map.css\";\nimport { setCurrentShop } from \"../store/reducers/shopReducer\";\nimport CustomHeaderBlock from \"../components/CustomHeaderBlock/CustomHeaderBlock\";\nimport { PANELS } from \"../consts/conts\";\n\nconst Map = (props) => {\n  const dispatch = useDispatch();\n  const { shops } = useSelector((store) => store.shops);\n  const [localMap, setLocalMap] = useState(\"\");\n  const handleLoad = () => {\n    window.ymaps.ready(() => {\n      setLocalMap(\n        new ymaps.Map(\n          \"map-2\",\n          {\n            center: [55.751574, 37.573856],\n            zoom: 9,\n          },\n          {\n            searchControlProvider: \"yandex#search\",\n          }\n        )\n      );\n    });\n  };\n  useEffect(() => {\n    handleLoad();\n  }, []);\n\n  shops.forEach((shop, i) => {\n    const template = `<div id=\"map_point\" class=\"map_point\" data-to=\"current-shop\"   data-id=${shops[i].id} class=\"text\">\n    <svg width=\"45\" height=\"45\" viewBox=\"0 0 43 60\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M39.3987 14.268L34.2549 6.33511L27.0508 3.11149L27.191 2.25652L24.528 1.99023L24.1776 1.83605L24.1636 1.96219L20.5475 1.59778L20.5335 1.20534L19.7346 1.51369L16.6792 1.19133L16.9735 2.57889L11.7456 4.62519L2.52323 13.6233L2.08874 26.4898L20.954 57.3665L29.3214 44.7103L36.8198 32.4885L40.0294 23.9109L39.3987 14.268ZM24.8223 29.2789L16.6792 28.424L12.3903 22.201L14.745 14.0578L19.5944 12.2217L22.9022 12.7684L27.191 14.9128L29.3354 23.4904L24.8223 29.2789Z\" fill=\"#F48542\"/>\n<path d=\"M21.0096 0C9.4186 0 0 9.4186 0 21.0096C0 24.92 1.07921 28.7463 3.13953 32.0541L19.8183 58.9363C20.1407 59.4549 20.7013 59.7632 21.304 59.7632H21.318C21.9347 59.7632 22.4953 59.4409 22.8037 58.9083L39.062 31.7738C40.9961 28.5361 42.0193 24.8079 42.0193 21.0096C42.0193 9.4186 32.6007 0 21.0096 0ZM36.0486 29.9797L21.2759 54.6475L6.11088 30.218C4.40095 27.4569 3.47591 24.2753 3.47591 21.0096C3.47591 11.3528 11.3528 3.47591 21.0096 3.47591C30.6665 3.47591 38.5294 11.3528 38.5294 21.0096C38.5294 24.1772 37.6604 27.2747 36.0486 29.9797Z\" fill=\"black\"/>\n<path d=\"M21.0101 10.5119C15.2216 10.5119 10.4983 15.2212 10.4983 21.0097C10.4983 26.7701 15.1375 31.5215 21.0101 31.5215C26.9528 31.5215 31.5219 26.7141 31.5219 21.0097C31.5219 15.2212 26.7986 10.5119 21.0101 10.5119ZM21.0101 28.0316C17.1277 28.0316 13.9882 24.878 13.9882 21.0097C13.9882 17.1413 17.1558 13.9878 21.0101 13.9878C24.8644 13.9878 28.018 17.1553 28.018 21.0097C28.032 24.822 24.9485 28.0316 21.0101 28.0316Z\" fill=\"black\"/>\n</svg>\n\n    <div class=\"place_title\">\n    <div>${shops[i].name}</div>\n    <div>\n    <img src=\"https://cdn1.iconfinder.com/data/icons/interface-travel-and-environment/64/star-interface-256.png\" style=\"width:12px;heigth:12px\">\n    <span class=\"text_small\">\n    4,5 Капучино от 190 р\n    </span>\n    </div>\n    </div>\n    </div>`;\n    let content = ymaps?.templateLayoutFactory?.createClass(template);\n    if (window.ymaps.GeoObject) {\n      const myGeoObject = new ymaps.Placemark(\n        shops[i].location,\n        {\n          hintContent: shops[i].name,\n        },\n        {\n          iconLayout: content,\n          iconShape: {\n            type: \"Rectangle\",\n            coordinates: [\n              [-95, -88],\n              [85, 78],\n            ],\n          },\n        }\n      );\n      if (localMap.geoObjects) {\n        localMap.geoObjects.add(myGeoObject);\n        myGeoObject.events.add(\"click\", function (e) {\n          const dom = document.getElementsByClassName(\"map_point\");\n          props.setModalActive({\n            state: true,\n            panel: PANELS.MAP_PANEL,\n            shop: dom[i],\n          });\n          dispatch(setCurrentShop(dom[i].dataset.id));\n        });\n      }\n    }\n  });\n  return (\n    <Panel id={props.id}>\n      <CustomHeaderBlock className='header__block-map' />\n      <Group>\n        <Tabs className='select__tabs-map'>\n          <TabsItem data-to='home' onClick={(e) => props.go(e)}>\n            Cписок заведений\n          </TabsItem>\n          <TabsItem data-to='map' onClick={(e) => props.go(e)} className='shop'>\n            Карта заведений\n          </TabsItem>\n        </Tabs>\n      </Group>\n      <div id='map-2'></div>\n    </Panel>\n  );\n};\n\nMap.propTypes = {\n  id: PropTypes.string.isRequired,\n  go: PropTypes.func.isRequired,\n};\n\nexport default Map;\n","import React from \"react\";\r\nimport { Icon24Search } from \"@vkontakte/icons\";\r\nimport { Icon24ShoppingCartOutline } from \"@vkontakte/icons\";\r\nimport { Icon24MenuOutline } from \"@vkontakte/icons\";\r\nimport { Group, Cell, Div, List, Footer, Tabbar } from \"@vkontakte/vkui\";\r\nimport \"./CustomFooter.css\";\r\nimport { PANELS, VIEWS } from \"../../consts/conts\";\r\nconst CustomFooter = ({ activePanel , go }) => {\r\n  return (\r\n    <Tabbar className='nav__tabbar'>\r\n      <Group className='footer__group'>\r\n        <List className='nav__list'>\r\n          <Cell className='nav__item' expandable>\r\n            {PANELS.SEARCH_PANELS.some(panel => panel === activePanel) ? (\r\n              <>\r\n                <Div>\r\n                  <Icon24Search fill=\"orange\" data-to=\"home\" onClick={(e)=>go(e)} />\r\n                </Div>\r\n                <span class=\"active\">Поиск</span>\r\n              </>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </Cell>\r\n\r\n          <Cell className='nav__item' expandable>\r\n            <Div>\r\n              <Icon24ShoppingCartOutline fill='#99A2AD' />\r\n            </Div>\r\n            Корзина\r\n          </Cell>\r\n          <Cell className='nav__item' expandable>\r\n            <Div>\r\n              <Icon24MenuOutline fill='#99A2AD' />\r\n            </Div>\r\n            Мои заказы\r\n          </Cell>\r\n        </List>\r\n      </Group>\r\n    </Tabbar>\r\n  );\r\n};\r\n\r\nexport default CustomFooter;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport \"./CurrentShop.css\";\r\nimport {\r\n  CardGrid,\r\n  ContentCard,\r\n  Group,\r\n  HorizontalScroll,\r\n  Tabs,\r\n  Card,\r\n  TabsItem,\r\n  Headline,\r\n  Spacing,\r\n  Title,\r\n  Panel,\r\n  Button,\r\n} from \"@vkontakte/vkui\";\r\nimport { useState } from \"react\";\r\nimport { PANELS } from \"../../consts/conts\";\r\nimport { setCurrentShop } from \"../../store/reducers/shopReducer\";\r\nimport CustomSpinner from \"../CustomSpinner/CustomSpinner\";\r\nexport default function CurrentShop({ go, id }) {\r\n  const { currentShop } = useSelector((store) => store.shops);\r\n  const { currentUserOrder } = useSelector((store) => store.user);\r\n  const dispatch = useDispatch();\r\n  const [activeTab, setActiveTab] = useState(\"Напитки\");\r\n  return (\r\n    <Panel id={id}>\r\n      {currentShop.isLoading ? (\r\n        <CustomSpinner />\r\n      ) : (\r\n        <Group>\r\n          <CardGrid className='cards__container current__shop-card' size='l'>\r\n            <ContentCard\r\n              onClick={(e) => {}}\r\n              key={currentShop.id}\r\n              className='current__shop-card'\r\n              image={currentShop.img}\r\n              src={currentShop.img}\r\n              subtitle={\"КОФЕЙНЯ \" + currentShop.name}></ContentCard>\r\n          </CardGrid>\r\n          <Tabs>\r\n            <HorizontalScroll>\r\n              {currentShop.categories.map((category) => (\r\n                <TabsItem\r\n                  onClick={() =>\r\n                    dispatch(setCurrentShop(currentShop.id, category.id))\r\n                  }>\r\n                  {category.name}\r\n                </TabsItem>\r\n              ))}\r\n            </HorizontalScroll>\r\n          </Tabs>\r\n          <Group class=''>\r\n            <CardGrid className='menu__container' size='m'>\r\n              {currentShop.menu.map((menuItem) => {\r\n                return (\r\n                  <Card className='menu__item' mode='outline'>\r\n                    <img src={menuItem.img} class='menu__item-img'></img>\r\n                    <Spacing size={16} />\r\n                    <div>\r\n                      <Headline>{menuItem.name}</Headline>\r\n                    </div>\r\n                    <Spacing size={16} />\r\n                    <div class='menu__item-buy'>\r\n                      <Title\r\n                        class='menu__item-but-text'\r\n                        level='2'\r\n                        weight='semibold'>\r\n                        ₽ {menuItem.cost}\r\n                      </Title>\r\n                      <div\r\n                        class='menu__item-buy-cirle'\r\n                        data-to={PANELS.CURRENT_SHOP_ORDER_PANEL}\r\n                        onClick={(e) => go(e)}>\r\n                        <svg\r\n                          height='26'\r\n                          width='26'\r\n                          fill='white'\r\n                          viewBox='0 0 512 512'\r\n                          xmlns='http://www.w3.org/2000/svg'>\r\n                          <title />\r\n                          <g data-name='1' id='_1'>\r\n                            <path d='M397.78,316H192.65A15,15,0,0,1,178,304.33L143.46,153.85a15,15,0,0,1,14.62-18.36H432.35A15,15,0,0,1,447,153.85L412.4,304.33A15,15,0,0,1,397.78,316ZM204.59,286H385.84l27.67-120.48H176.91Z' />\r\n                            <path d='M222,450a57.48,57.48,0,1,1,57.48-57.48A57.54,57.54,0,0,1,222,450Zm0-84.95a27.48,27.48,0,1,0,27.48,27.47A27.5,27.5,0,0,0,222,365.05Z' />\r\n                            <path d='M368.42,450a57.48,57.48,0,1,1,57.48-57.48A57.54,57.54,0,0,1,368.42,450Zm0-84.95a27.48,27.48,0,1,0,27.48,27.47A27.5,27.5,0,0,0,368.42,365.05Z' />\r\n                            <path d='M158.08,165.49a15,15,0,0,1-14.23-10.26L118.14,78H70.7a15,15,0,1,1,0-30H129a15,15,0,0,1,14.23,10.26l29.13,87.49a15,15,0,0,1-14.23,19.74Z' />\r\n                          </g>\r\n                        </svg>\r\n                      </div>\r\n                    </div>\r\n                  </Card>\r\n                );\r\n              })}\r\n            </CardGrid>\r\n            {currentUserOrder.totalCount > 0 ? (\r\n              <Button\r\n                size='l'\r\n                stretched\r\n                style={{ marginTop: 150, position: \"absolute\", bottom: 100 }}>\r\n                Заказ : {currentUserOrder.totalCount} ₽\r\n              </Button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </Group>\r\n        </Group>\r\n      )}\r\n    </Panel>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./Selected.css\";\r\nexport default function Selected() {\r\n  return (\r\n    <svg\r\n     className=\"selected\"\r\n      width='30'\r\n      height='30'\r\n      viewBox='0 0 30 30'\r\n      fill='none'\r\n      xmlns='http://www.w3.org/2000/svg'>\r\n      <rect x='2.5' y='2.5' width='25' height='25' rx='12.5' fill='white' />\r\n      <path\r\n        d='M25 15C25 17.6522 23.9464 20.1957 22.0711 22.0711C20.1957 23.9464 17.6522 25 15 25C12.3478 25 9.8043 23.9464 7.92893 22.0711C6.05357 20.1957 5 17.6522 5 15C5 12.3478 6.05357 9.8043 7.92893 7.92893C9.8043 6.05357 12.3478 5 15 5C17.6522 5 20.1957 6.05357 22.0711 7.92893C23.9464 9.8043 25 12.3478 25 15ZM20.0375 11.2125C19.9482 11.1235 19.8419 11.0535 19.7249 11.0065C19.6079 10.9596 19.4827 10.9367 19.3567 10.9393C19.2306 10.9418 19.1064 10.9698 18.9914 11.0215C18.8765 11.0731 18.7731 11.1475 18.6875 11.24L14.3463 16.7712L11.73 14.1537C11.5523 13.9881 11.3172 13.898 11.0743 13.9023C10.8315 13.9066 10.5997 14.005 10.428 14.1767C10.2562 14.3485 10.1578 14.5802 10.1535 14.8231C10.1492 15.066 10.2394 15.301 10.405 15.4788L13.7125 18.7875C13.8016 18.8764 13.9077 18.9465 14.0245 18.9936C14.1413 19.0406 14.2663 19.0637 14.3922 19.0613C14.5181 19.059 14.6422 19.0313 14.7571 18.98C14.8721 18.9286 14.9755 18.8547 15.0612 18.7625L20.0513 12.525C20.2214 12.3481 20.3153 12.1116 20.313 11.8662C20.3107 11.6208 20.2122 11.3861 20.0387 11.2125H20.0375Z'\r\n        fill='#F48542'\r\n      />\r\n      <rect\r\n        x='2.5'\r\n        y='2.5'\r\n        width='25'\r\n        height='25'\r\n        rx='12.5'\r\n        stroke='#FAF2EB'\r\n        stroke-width='5'\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport $api from \"./api\";\r\nexport default class UserService {\r\n  static getGeo(url) {\r\n    return fetch(url).then((res) => res.json());\r\n  }\r\n}\r\n","/* eslint-disable no-use-before-define */\r\n/* eslint-disable camelcase */\r\n/* eslint-disable arrow-body-style */\r\n/* eslint-disable consistent-return */\r\n/* eslint-disable array-callback-return */\r\n/* eslint-disable func-names */\r\n\r\nimport UserService from \"../../api/userService\";\r\nimport {\r\n  SET_USER_GEO_DATA,\r\n  SET_USER_ORDER,\r\n} from \"../actions-conts/actions-conts\";\r\nimport { setUserGeoDataAC, setUserOrderAC } from \"../actions/actions\";\r\n\r\nconst initialState = {\r\n  userAdress: \"\",\r\n  userLocation: \"\",\r\n  currentUserOrder: {\r\n    size: \"\",\r\n    adds: [],\r\n    sizeCount: 0,\r\n    addsCount: 0,\r\n    totalCount: 0,\r\n  },\r\n};\r\n\r\nconst userReducer = (state = initialState, action) => {\r\n  let stateCopy = { ...state };\r\n  switch (action.type) {\r\n    case SET_USER_GEO_DATA:\r\n      console.log(action);\r\n      if (action.payload.type === \"auto\") {\r\n        stateCopy.userAdress =\r\n          action.payload.data.city + \" , \" + action.payload.data.road;\r\n      }\r\n      if (action.payload.type === \"search\") {\r\n        stateCopy.userAdress =  action.payload.data.join(\" , \")\r\n      }\r\n      return {\r\n        ...stateCopy,\r\n      };\r\n    case SET_USER_ORDER:\r\n      console.log(action);\r\n      if (action.payload.type === \"size\") {\r\n        stateCopy.currentUserOrder.sizeCount = action.payload.count;\r\n      }\r\n      if (action.payload.type === \"adds\") {\r\n        stateCopy.currentUserOrder.addsCount += action.payload.count;\r\n      }\r\n      stateCopy.currentUserOrder.totalCount =\r\n        stateCopy.currentUserOrder.sizeCount +\r\n        stateCopy.currentUserOrder.addsCount;\r\n      return {\r\n        ...stateCopy,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const setUserGeoData = (location) => {\r\n  return async function (dispatch) {\r\n    const geoData = await UserService.getGeo(\r\n      `https://nominatim.openstreetmap.org/reverse?lat=${location.lat}&lon=${location.long}&zoom=18&addressdetails=1&format=json`\r\n    );\r\n    dispatch(setUserGeoDataAC({ data: geoData.address, type: \"auto\" }));\r\n  };\r\n};\r\nexport const setUserOrder = (e) => {\r\n  return async function (dispatch) {\r\n    if (e.target.closest(\".current-dish__size\")?.dataset?.sizeCount) {\r\n      const sizeCount = e.target.closest(\".current-dish__size\").dataset\r\n        .sizeCount;\r\n      dispatch(setUserOrderAC({ type: \"size\", count: +sizeCount }));\r\n      return;\r\n    }\r\n    if (e.target.closest(\".vkuiCheckbox__input\")?.dataset?.addsCount) {\r\n      const addsCount = e.target.closest(\".vkuiCheckbox__input\").dataset\r\n        .addsCount;\r\n      dispatch(setUserOrderAC({ type: \"adds\", count: +addsCount }));\r\n      return;\r\n    }\r\n  };\r\n};\r\nexport default userReducer;\r\n","import {\r\n  Panel,\r\n  PanelHeader,\r\n  CardGrid,\r\n  ContentCard,\r\n  Group,\r\n  Tabs,\r\n  TabsItem,\r\n} from \"@vkontakte/vkui\";\r\nimport React from \"react\";\r\nimport { PANELS, TABS } from \"../../consts/conts\";\r\nimport { PanelHeaderBack } from \"@vkontakte/vkui\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport \"./CurrentShopProduct.css\";\r\nimport { useState } from \"react\";\r\nimport Selected from \"../../img/svg/Selected/Selected\";\r\nimport { FormItem, Checkbox, Button } from \"@vkontakte/vkui\";\r\nimport { setUserOrder } from \"../../store/reducers/userReducer\";\r\n\r\nexport default function CurrentShopProduct({ go }) {\r\n  const { currentShop } = useSelector((store) => store.shops);\r\n  const { currentUserOrder } = useSelector((store) => store.user);\r\n  const [activeTab, setActiveTab] = useState(false);\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <Panel>\r\n      <CardGrid className='current-dish__cotnainer' size='l'>\r\n        <PanelHeaderBack\r\n          className='back_button'\r\n          onClick={go}\r\n          data-to={PANELS.CURRENT_SHOP_PANEL}\r\n        />\r\n        <ContentCard\r\n          onClick={(e) => {}}\r\n          key={currentShop.id}\r\n          className='current__shop-card'\r\n          image={currentShop.img}\r\n          src={currentShop.img}></ContentCard>\r\n        <div className='current-dish__title'>\r\n          <div>\r\n            <h2>130 P</h2>\r\n          </div>\r\n          <div>\r\n            <h2>Капучино</h2>\r\n          </div>\r\n          <div>Рекомендуем обьём L</div>\r\n        </div>\r\n        <div className='current-dish__sizes'>\r\n          <Group>\r\n            <Tabs className='current-dish__sizes' mode='segmented'>\r\n              <TabsItem\r\n                className='current-dish__size'\r\n                onClick={(e) => {\r\n                  dispatch(setUserOrder(e));\r\n                  setActiveTab(TABS.small);\r\n                }}\r\n                selected={activeTab === TABS.small}\r\n                data-size-count='140'>\r\n                {activeTab === TABS.small ? <Selected /> : \"\"} S {TABS.small} ₽\r\n              </TabsItem>\r\n              <TabsItem\r\n                className='current-dish__size'\r\n                onClick={(e) => {\r\n                  dispatch(setUserOrder(e));\r\n                  setActiveTab(TABS.medium);\r\n                }}\r\n                selected={activeTab === TABS.medium}\r\n                data-size-count='160'>\r\n                {activeTab === TABS.medium ? <Selected /> : \"\"} M {TABS.medium}{\" \"}\r\n                ₽\r\n              </TabsItem>\r\n              <TabsItem\r\n                className='current-dish__size'\r\n                onClick={(e) => {\r\n                  dispatch(setUserOrder(e));\r\n                  setActiveTab(TABS.large);\r\n                }}\r\n                selected={activeTab === TABS.large}\r\n                data-size-count='180'>\r\n                {activeTab === TABS.large ? <Selected /> : \"\"}L {TABS.large} ₽\r\n              </TabsItem>\r\n            </Tabs>\r\n          </Group>\r\n          <Group>\r\n            <div className='current-dish__adds'>\r\n              <div className='current-dish__add'>\r\n                <div className='add-title'>С сиропом вкуснее! 🍬</div>\r\n                <div className='add-variants'>\r\n                  <FormItem className='add-variant'>\r\n                    <Checkbox\r\n                      onChange={(e) => {\r\n                        dispatch(setUserOrder(e));\r\n                      }}\r\n                      data-adds-count='20'>\r\n                      Кокосовый сироп +20 ₽\r\n                    </Checkbox>\r\n                  </FormItem>\r\n                  <FormItem className='add-variant'>\r\n                    <Checkbox\r\n                      onChange={(e) => {\r\n                        dispatch(setUserOrder(e));\r\n                      }}\r\n                      data-adds-count='20'>\r\n                      Кленовый сироп +20 ₽\r\n                    </Checkbox>\r\n                  </FormItem>\r\n                  <div className='add-title'>\r\n                    На альтернативном молоке полезнее 🌿\r\n                  </div>\r\n                  <FormItem className='add-variant'>\r\n                    <Checkbox\r\n                      onChange={(e) => {\r\n                        dispatch(setUserOrder(e));\r\n                      }}\r\n                      data-adds-count='40'>\r\n                      Миндальное +40 ₽\r\n                    </Checkbox>\r\n                  </FormItem>\r\n                  <FormItem>\r\n                    <Checkbox\r\n                      onChange={(e) => {\r\n                        dispatch(setUserOrder(e));\r\n                      }}\r\n                      data-adds-count='40'>\r\n                      Миндальное +40 ₽\r\n                    </Checkbox>\r\n                  </FormItem>\r\n                </div>\r\n                <Button size='l' stretched style={{ marginRight: 8 }}>\r\n                  В корзину\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </Group>\r\n        </div>\r\n      </CardGrid>\r\n      <Group className='current__dish'></Group>\r\n    </Panel>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  ModalRoot,\r\n  ModalPage,\r\n  Select,\r\n  FormLayout,\r\n  ModalPageHeader,\r\n  Separator,\r\n  Div,\r\n  Button,\r\n  Input,\r\n  PanelHeaderButton,\r\n  Spinner,\r\n} from \"@vkontakte/vkui\";\r\nimport \"@vkontakte/vkui/dist/vkui.css\";\r\nimport { Icon16Clear } from \"@vkontakte/icons\";\r\nimport \"./Popup.css\";\r\nimport { PANELS } from \"../../consts/conts\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nconst Popup = ({ modalActive, setModalActive, getGeo, go }) => {\r\n  const { currentShop } = useSelector((store) => store.shops);\r\n  const styles = {\r\n    container: \"popup_container\",\r\n    buttons: \"popup_buttons\",\r\n  };\r\n  const mapStyles = {\r\n    container: \"popup-map__container\",\r\n    imgContainer: \"popup-map__img-container\",\r\n    img: \"popup-map__img\",\r\n    description: \"popup-map__description\",\r\n    button: \"popup-map__button\",\r\n  };\r\n/*   const goToMapStyles = {\r\n    container \r\n    \r\n  } */\r\n  const renderSwitch = (param) => {\r\n    switch (param) {\r\n      case PANELS.MAIN_PANEL:\r\n        return (\r\n          <div className={styles.container}>\r\n            <h2>\r\n              Чтобы увидеть заведения на карте, необходимо разрешить передачу\r\n              геоданных\r\n            </h2>\r\n            <div className={styles.buttons}>\r\n              <Div\r\n                onClick={() => {\r\n                  getGeo();\r\n                  setModalActive({ state: false, panel: PANELS.MAIN_PANEL });\r\n                }}>\r\n                <Button>Cогласится</Button>\r\n              </Div>\r\n              <Div\r\n                onClick={() =>\r\n                  setModalActive({ state: false, panel: PANELS.MAIN_PANEL })\r\n                }>\r\n                <Button mode='destructive'>Отказатся</Button>\r\n              </Div>\r\n            </div>\r\n          </div>\r\n        );\r\n      case PANELS.MAP_PANEL:\r\n        return (\r\n          <div className={mapStyles.container}>\r\n            <div className={mapStyles.imgContainer}>\r\n              <img src={currentShop.img} className={mapStyles.img} />\r\n            </div>\r\n            <div className={mapStyles.description}>\r\n              <span>Name : {currentShop.name}</span>\r\n              <span>\r\n                from : {currentShop.workingFrom} to {currentShop.workingTo}\r\n              </span>\r\n              <span>Rate : {currentShop.middleRate}</span>\r\n              <span>Adress : {currentShop.addressText}</span>\r\n            </div>\r\n            <div className={mapStyles.button}>\r\n              <Div\r\n                onClick={() => {\r\n                  go(modalActive.shop);\r\n                  setModalActive({ ...modalActive, state: false });\r\n                }}>\r\n                <Button>Перейти</Button>\r\n              </Div>\r\n            </div>\r\n          </div>\r\n        );\r\n      case \"map-btn\":\r\n        <div className={mapStyles.container}>\r\n\r\n        </div>;\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  console.log(\"MODAL DATA\", modalActive);\r\n  return (\r\n    <ModalRoot\r\n      activeModal={modalActive.state ? \"modalPage\" : null}\r\n      onClose={() => {\r\n        setModalActive(false);\r\n      }}>\r\n      <ModalPage id='modalPage'>\r\n        <ModalPageHeader\r\n          right={\r\n            <PanelHeaderButton\r\n              onClick={() => setModalActive(false)}></PanelHeaderButton>\r\n          }></ModalPageHeader>\r\n        {renderSwitch(modalActive.panel || modalActive.target)}\r\n        <Separator />\r\n      </ModalPage>\r\n    </ModalRoot>\r\n  );\r\n};\r\n\r\nexport default Popup;\r\n","import React, { useState, useEffect } from \"react\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport {\n  View,\n  ScreenSpinner,\n  AdaptivityProvider,\n  AppRoot,\n} from \"@vkontakte/vkui\";\nimport \"@vkontakte/vkui/dist/vkui.css\";\n\nimport Home from \"./panels/Home\";\nimport Map from \"./panels/Map\";\nimport CustomFooter from \"./components/CustomFooter/CustomFooter\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setAllShops } from \"./store/reducers/shopReducer\";\nimport CurrentShop from \"./components/CurrentShop/CurrentShop\";\nimport CurrentShopProduct from \"./components/CurrentShopProduct/CurrentShopProduct\";\nimport { setUserGeoData } from \"./store/reducers/userReducer\";\nimport Popup from \"./components/Popup/Popup\";\nimport { PANELS } from \"./consts/conts\";\n\nconst App = () => {\n  const [activePanel, setActivePanel] = useState(\"home\");\n  const [fetchedUser, setUser] = useState(null);\n  const [popoup, setPopoup] = useState({\n    state: true,\n    panel: PANELS.MAIN_PANEL,\n    target : '',\n    shop: null,\n  });\n  const [userGeo, setUserGeo] = useState(null);\n  const dispatch = useDispatch();\n  const { shops } = useSelector((store) => store.shops);\n  const getGeo = async () => {\n    try {\n      const geo = await bridge.send(\"VKWebAppGetGeodata\");\n      setUserGeo(geo);\n      dispatch(setUserGeoData({ lat: geo.lat, long: geo.long }));\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  useEffect(() => {\n    bridge.subscribe(({ detail: { type, data } }) => {\n      if (type === \"VKWebAppUpdateConfig\") {\n        const schemeAttribute = document.createAttribute(\"scheme\");\n        schemeAttribute.value = data.scheme ? data.scheme : \"client_light\";\n        document.body.attributes.setNamedItem(schemeAttribute);\n      }\n    });\n    async function fetchData() {\n      const user = await bridge.send(\"VKWebAppGetUserInfo\");\n      setUser(user);\n    }\n    fetchData();\n    dispatch(setAllShops());\n  }, []);\n  const go = (e) => {\n    if (!e.currentTarget) {\n      setActivePanel(e.dataset.to);\n      return;\n    }\n    setActivePanel(e.currentTarget.dataset.to);\n  };\n  return (\n    <AdaptivityProvider>\n      <AppRoot>\n        <View\n          activePanel={activePanel}\n          modal={\n            <Popup\n              modalActive={popoup}\n              setModalActive={setPopoup}\n              getGeo={getGeo}\n              go={go}\n            />\n          }>\n          <Home\n            modalActive={popoup}\n            setModalActive={setPopoup}\n            userGeo={userGeo}\n            id='home'\n            fetchedUser={fetchedUser}\n            shops={shops}\n            go={go}\n          />\n          <Map setModalActive={setPopoup} id='map' go={go} />\n          <CurrentShop id='current-shop' go={go} />\n          <CurrentShopProduct id='current-shop-order-product' go={go} />\n        </View>\n        <CustomFooter activePanel={activePanel} go={go} />\n      </AppRoot>\n    </AdaptivityProvider>\n  );\n};\n\nexport default App;\n","import { combineReducers, applyMiddleware, createStore } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport shopReducer from \"./reducers/shopReducer\";\r\nimport userReducer from \"./reducers/userReducer\";\r\n\r\nconst redusers = combineReducers({\r\n  shops: shopReducer,\r\n  user : userReducer\r\n});\r\n\r\nconst store = createStore(redusers, applyMiddleware(thunk));\r\nwindow.redux = store;\r\n\r\nexport default store;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\nimport store from \"./store/store\";\nimport { Provider } from \"react-redux\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}